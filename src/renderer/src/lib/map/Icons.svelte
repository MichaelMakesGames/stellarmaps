<script lang="ts">
	import * as R from 'rambda';

	let viewBox = '-100 -100 200 200';

	function pointOnCircle(radianFraction: number, radius: number) {
		return `${Math.cos(radianFraction * 2 * Math.PI) * radius},${
			Math.sin(radianFraction * 2 * Math.PI) * radius
		}`;
	}

	function pointsToSvgPath(points: string[]) {
		return `${points.map((p, i) => (i === 0 ? `M${p}` : `L${p}`)).join(' ')} z`;
	}

	function makeRegularPolygonPath(n: number, { flatTop }: { flatTop: boolean }) {
		const points = R.range(0, n).map((i) =>
			pointOnCircle(i / n - 0.25 - (flatTop ? 0.5 / n : 0), 90),
		);
		return pointsToSvgPath(points);
	}

	function makeStarPath(n: number) {
		const points = R.range(0, n).flatMap((i) => [
			pointOnCircle(i / n - 0.25, 90),
			pointOnCircle((i * 2 + 1) / (n * 2) - 0.25, 30),
		]);
		return pointsToSvgPath(points);
	}
</script>

<symbol id="icon-triangle" {viewBox}>
	<path d={makeRegularPolygonPath(3, { flatTop: false })} />
</symbol>

<symbol id="icon-triangle-flat" {viewBox}>
	<path d={makeRegularPolygonPath(3, { flatTop: true })} />
</symbol>

<symbol id="icon-triangle-narrow" {viewBox}>
	<path
		d={pointsToSvgPath([
			pointOnCircle(-0.25, 90),
			pointOnCircle(-0.65, 90),
			pointOnCircle(-0.85, 90),
		])}
	/>
</symbol>

<symbol id="icon-diamond" {viewBox}>
	<path d={makeRegularPolygonPath(4, { flatTop: false })} />
</symbol>

<symbol id="icon-square" {viewBox}>
	<path d={makeRegularPolygonPath(4, { flatTop: true })} />
</symbol>

<symbol id="icon-pentagon" {viewBox}>
	<path d={makeRegularPolygonPath(5, { flatTop: false })} />
</symbol>

<symbol id="icon-pentagon-flat" {viewBox}>
	<path d={makeRegularPolygonPath(5, { flatTop: true })} />
</symbol>

<symbol id="icon-hexagon" {viewBox}>
	<path d={makeRegularPolygonPath(6, { flatTop: false })} />
</symbol>

<symbol id="icon-hexagon-flat" {viewBox}>
	<path d={makeRegularPolygonPath(6, { flatTop: true })} />
</symbol>

<symbol id="icon-heptagon" {viewBox}>
	<path d={makeRegularPolygonPath(7, { flatTop: false })} />
</symbol>

<symbol id="icon-heptagon-flat" {viewBox}>
	<path d={makeRegularPolygonPath(7, { flatTop: true })} />
</symbol>

<symbol id="icon-octagon" {viewBox}>
	<path d={makeRegularPolygonPath(8, { flatTop: false })} />
</symbol>

<symbol id="icon-octagon-flat" {viewBox}>
	<path d={makeRegularPolygonPath(8, { flatTop: true })} />
</symbol>

<symbol id="icon-circle" {viewBox}>
	<circle cx="0" cy="0" r="90" />
</symbol>

<symbol id="icon-3-pointed-star" {viewBox}>
	<path d={makeStarPath(3)} />
</symbol>

<symbol id="icon-4-pointed-star" {viewBox}>
	<path d={makeStarPath(4)} />
</symbol>

<symbol id="icon-5-pointed-star" {viewBox}>
	<path d={makeStarPath(5)} />
</symbol>

<symbol id="icon-6-pointed-star" {viewBox}>
	<path d={makeStarPath(6)} />
</symbol>

<symbol id="icon-7-pointed-star" {viewBox}>
	<path d={makeStarPath(7)} />
</symbol>

<symbol id="icon-8-pointed-star" {viewBox}>
	<path d={makeStarPath(8)} />
</symbol>

<symbol id="icon-cross" {viewBox}>
	<rect x="-90" y="-30" width="180" height="60" />
	<rect x="-30" y="-90" width="60" height="60" />
	<rect x="-30" y="30" width="60" height="60" />
</symbol>

<symbol id="icon-wormhole" {viewBox}>
	<g>
		<path
			d="m -35.174885,90 c 0,0 -21.076521,-32.83836 -21.494998,-58.03296 -0.544927,-32.811558 14.681737,-52.195039 37.169373,-52.122448 17.934928,-0.08934 19.501526,15.686231 19.501526,15.686231 0,0 -20.935912,-25.828262 -36.082757,6.500174 -14.350091,30.628233 10.540583,54.959543 10.540583,54.959543 z"
		/>
		<path
			d="m -90,-35.184072 c 0,0 32.834301,-21.079218 58.025779,-21.497791 32.807501,-0.544995 52.188581,14.683575 52.116001,37.173971 0.0893,17.937236 -15.684289,19.504095 -15.684289,19.504095 0,0 25.825069,-20.938502 -6.49937,-36.087333 -30.624444,-14.351889 -54.952749,10.541842 -54.952749,10.541842 z"
		/>
		<path
			d="m 35.17694,-90 c 0,0 21.07661,32.838363 21.49513,58.032958 C 57.217,0.844518 41.99031,20.228 19.5027,20.15541 1.567681,20.24471 0.001016,4.469177 0.001016,4.469177 c 0,0 20.935914,25.828263 36.082874,-6.500174 C 50.434,-32.65923 25.54335,-56.990544 25.54335,-56.990544 Z"
		/>
		<path
			d="m 90,35.17648 c 0,0 -32.8343,21.07899 -58.02578,21.49757 -32.8075,0.54499 -52.188584,-14.68358 -52.116001,-37.17398 -0.08933,-17.937232 15.68429,-19.503867 15.68429,-19.503867 0,0 -25.825067,20.938497 6.49937,36.087107 C 32.66632,50.4352 56.99463,25.54147 56.99463,25.54147 Z"
		/>
	</g>
</symbol>

<symbol id="icon-gateway" {viewBox}>
	<g>
		<path
			d="m -7.0026001,22.15439 v 26.4356 L -31.9556,57.88555 -75,31.70471 l 3.821989,14.9996 47.429146,36.69751 3.240111,-20.24218 13.5061539,-0.42685 V 89.99986 H 7.0027454 V 62.73641 L 20.508899,63.16274 23.74901,83.40543 71.178157,46.70793 75.000145,31.70782 31.955745,57.88916 7.0027454,48.59309 v -26.4387 z"
		/>
		<path
			d="m -7.0026001,-90 v 27.267069 L -20.508754,-63.159262 -23.748865,-83.401437 -71.178011,-46.704452 -75,-31.704334 l 43.0444,-26.181348 24.9529999,9.296074 v 26.435079 H 7.0027454 v -26.438696 l 24.9529996,-9.295558 43.0444,26.180832 -3.821988,-14.999602 -47.429147,-36.697501 -3.240111,20.242175 -13.5061536,0.426331 V -90 Z"
		/>
		<path
			d="M 0,-226.77148 A 226.77165,226.77165 0 0 0 -226.77148,0 226.77165,226.77165 0 0 0 0,226.77148 226.77165,226.77165 0 0 0 226.77148,0 226.77165,226.77165 0 0 0 0,-226.77148 Z m 0,18.89843 A 207.87402,207.87402 0 0 1 207.87305,0 207.87402,207.87402 0 0 1 0,207.87305 207.87402,207.87402 0 0 1 -207.87305,0 207.87402,207.87402 0 0 1 0,-207.87305 Z"
			transform="scale(0.26458333)"
		/>
	</g>
</symbol>

<symbol id="icon-l-gate" {viewBox}>
	<g>
		<path
			d="m -7.0026001,22.15439 v 26.4356 L -31.9556,57.88555 -75,31.70471 l 3.821989,14.9996 47.429146,36.69751 3.240111,-20.24218 13.5061539,-0.42685 V 89.99986 H 7.0027454 V 62.73641 L 20.508899,63.16274 23.74901,83.40543 71.178157,46.70793 75.000145,31.70782 31.955745,57.88916 7.0027454,48.59309 v -26.4387 z"
		/>
		<path
			d="m -7.0026001,-90 v 27.267069 L -20.508754,-63.159262 -23.748865,-83.401437 -71.178011,-46.704452 -75,-31.704334 l 43.0444,-26.181348 24.9529999,9.296074 v 26.435079 H 7.0027454 v -26.438696 l 24.9529996,-9.295558 43.0444,26.180832 -3.821988,-14.999602 -47.429147,-36.697501 -3.240111,20.242175 -13.5061536,0.426331 V -90 Z"
		/>
		<path
			d="M -4.9e-7,-70 -70,-5.44e-6 -4.9e-7,70 70,-5.44e-6 Z m 0,6.999568 L 63.000074,-3.6183e-4 -4.9e-7,62.999708 -63.000071,-3.6183e-4 Z m 0,7.00029 L -55.999787,-3.6183e-4 -4.9e-7,55.999426 55.999782,-3.6183e-4 Z m 0,7.000289 L 48.999856,-5.44e-6 -4.9e-7,48.999856 -48.999847,-5.44e-6 Z m 0,6.999569 L -41.999922,-3.6183e-4 -4.9e-7,41.999564 41.999931,-3.6183e-4 Z m 0,7.000283 L 35.000005,4.45e-6 -4.9e-7,35.000002 -34.999996,4.45e-6 Z"
		/>
	</g>
</symbol>

<symbol id="icon-shroud-tunnel" {viewBox}>
	<g>
		<path
			d="M -7.0026001,38.364583 V 48.58999 L -31.9556,57.88555 -75,31.70471 l 3.821989,14.9996 47.429146,36.69751 3.240111,-20.24218 13.5061539,-0.42685 V 89.99986 H 7.0027454 V 62.73641 L 20.508899,63.16274 23.74901,83.40543 71.178157,46.70793 75.000145,31.70782 31.955745,57.88916 7.0027454,48.59309 V 38.364583 Z"
		/>
		<path
			d="m -7.0026001,-90 v 27.267069 L -20.508754,-63.159262 -23.748865,-83.401437 -71.178011,-46.704452 -75,-31.704334 l 43.0444,-26.181348 24.9529999,9.296074 v 10.225025 H 7.0027454 v -10.228642 l 24.9529996,-9.295558 43.0444,26.180832 -3.821988,-14.999602 -47.429147,-36.697501 -3.240111,20.242175 -13.5061536,0.426331 V -90 Z"
		/>
		<path
			d="m -0.0073726,-56.25 c 0,0 -4.242173,37.405668 -74.9926274,56.2536358 70.7504544,18.8484092 74.9926274,56.2462982 74.9926274,56.2462982 0,0 4.256788,-37.397889 75.0073726,-56.2462982 C 4.2494154,-18.844332 -0.0073726,-56.25 -0.0073726,-56.25 Z m 0,18.751181 C 9.37417,-24.990537 18.754014,-12.487482 18.750045,0.0110058 18.746895,12.509683 9.366517,25.008045 -0.0073726,37.506124 -9.3777036,25.012581 -18.74608,12.514218 -18.750049,0.0110058 -18.753249,-12.4923 -9.3853566,-24.994947 -0.0073726,-37.498819 Z m -18.7426764,18.751306 c -2.5017,6.25493 -5.003717,12.502047 -5.002425,18.7511488 0.0013,6.2491335 2.503276,12.5026452 5.002425,18.7511802 C -25.000002,12.504423 -30.076,10.629462 -36.328095,7.5041083 -42.189292,4.5735253 -52.971843,0.0151318 -58.828063,0.0036358 c 5.85622,-0.0126 16.640472,-4.5729758 22.499968,-7.5004408 6.249984,-3.123496 11.324409,-4.99663 17.578046,-11.250708 z m 38.671936,0 c 6.253638,6.254078 11.328063,8.127212 17.578047,11.250708 5.8595,2.927465 16.64375,7.4889768 22.499966,7.5004408 -5.856216,0.0126 -16.638766,4.5698895 -22.499966,7.5004725 C 31.247842,10.629462 26.17184,12.504423 19.921887,18.754816 22.421037,12.506281 24.923052,6.2527693 24.924312,0.0036358 24.925612,-6.245466 22.423588,-12.492584 19.921887,-18.747513 Z"
		/>
	</g>
</symbol>
